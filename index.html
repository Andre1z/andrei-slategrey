<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Editor Multimedia</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #fafafa;
    }
    h1 {
      text-align: center;
      margin-top: 20px;
    }
    /* Contenedor de la línea de tiempo */
    #timeline-container {
      position: relative;
      width: 800px;
      height: 80px;
      margin: 20px auto;
      border: 1px solid #ccc;
      background-color: #f4f4f4;
    }
    /* Cursor de la línea de tiempo */
    #time-cursor {
      position: absolute;
      top: 0;
      width: 2px;
      height: 100%;
      background-color: red;
      /* Posición inicial (en píxeles, que se convertirá a tiempo en segundos) */
      left: 100px;
    }
    /* Display para mostrar el tiempo actual */
    #time-display {
      text-align: center;
      font-size: 18px;
      margin: 10px;
    }
    /* Controles de reproducción */
    #controls {
      text-align: center;
      margin: 10px;
    }
    #controls button {
      padding: 8px 12px;
      margin: 0 5px;
      font-size: 16px;
      cursor: pointer;
    }
    /* Área de drag & drop */
    #file-drop-area {
      border: 2px dashed #aaa;
      width: 400px;
      margin: 20px auto;
      padding: 20px;
      text-align: center;
      color: #777;
      background-color: #fff;
    }
    /* Estilos para la previsualización */
    #preview-canvas, #preview-video {
      display: block;
      margin: 20px auto;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>Editor Multimedia</h1>
  
  <!-- Contenedor de la línea de tiempo con el atributo de conversión: píxeles/segundo -->
  <div id="timeline-container" data-pixels-per-second="10">
      <div id="time-cursor"></div>
  </div>
  
  <!-- Display para mostrar el tiempo actual -->
  <div id="time-display">Tiempo actual: 00:00</div>
  
  <!-- Controles de reproducción -->
  <div id="controls">
    <button onclick="playbackLoop()">Play</button>
    <button onclick="stopPlayback()">Pause</button>
    <button onclick="resetPlayback()">Reset</button>
    <button onclick="stepFrames(-1)">Step Back</button>
    <button onclick="stepFrames(1)">Step Forward</button>
  </div>
  
  <!-- Área para soltar archivos (drag & drop) -->
  <div id="file-drop-area" ondragover="event.preventDefault()" ondrop="handleFileDrop(event)">
    Arrastra y suelta archivos aquí
  </div>
  
  <!-- Elementos para previsualización (elige video o canvas según lo requerido) -->
  <!-- Opción de previsualización con video (descomenta si se usará video) -->
  <!-- <video id="preview-video" width="320" height="240" controls></video> -->
  <!-- Opción de previsualización con canvas -->
  <canvas id="preview-canvas" width="320" height="240"></canvas>
  
  <!-- Inclusión de módulos JavaScript -->
  <script src="funciones/createTrackClip.js"></script>
  <script src="funciones/decodeAudioFile.js"></script>
  <script src="funciones/doRender.js"></script>
  <script src="funciones/drawAudioWaveform.js"></script>
  <script src="funciones/drawClipsAtTime.js"></script>
  <script src="funciones/drawTimeScale.js"></script>
  <script src="funciones/fileToArrayBuffer.js"></script>
  <script src="funciones/getTimelineMaxTime.js"></script>
  <script src="funciones/handleFileDrop.js"></script>
  <script src="funciones/moveTimeCursorTo.js"></script>
  <script src="funciones/onClipMoveMouseMove.js"></script>
  <script src="funciones/onClipMoveMouseUp.js"></script>
  <script src="funciones/onHandleResizeMove.js"></script>
  <script src="funciones/onHandleResizeUp.js"></script>
  <script src="funciones/playbackLoop.js"></script>
  <script src="funciones/scheduleAllAudio.js"></script>
  <script src="funciones/setPreviewTime.js"></script>
  <script src="funciones/startClipMove.js"></script>
  <script src="funciones/startHandleResize.js"></script>
  <script src="funciones/stepFrames.js"></script>
  <script src="funciones/transitions.js"></script>
  <script src="funciones/updatePreviewAtTime.js"></script>
  <script src="funciones/updatePreviewUI.js"></script>
  
  <!-- Inicialización tras la carga del DOM -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Actualiza la visualización de previsualización usando el cursor actual
      updatePreviewUI();

      // Si deseas programar la reproducción de audio u otros ajustes iniciales, puedes hacerlo aquí.
      // Ejemplo: scheduleAllAudio();
    });
  </script>
</body>
</html>